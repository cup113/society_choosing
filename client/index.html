<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>社团选课系统</title>
    <style>
      .browser-support {
        z-index: 999;
        font-size: 15vw;
      }
      #initial-loading {
        width: calc(100vw - 16px);
        height: calc(100vh - 16px);
        padding: 16px;
        box-sizing: border-box;
        background-color: #fde1ba;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-size: 5vw;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <div id="initial-loading">
        <span>Loading...</span>
        <span style="display: none;">请耐心等待。若此页面长时间不消失，可以尝试更换浏览器（禁止使用IE，尽量不要用手机系统自带浏览器）、检查网络、联系管理员等。</span>
        <span>...</span>
      </div>
    </div>
    <!--[if IE]>
      <div class="browser-support">
        <h1>您的浏览器版本过低</h1>
        <p>为了正常加载 UI 界面，请不要使用 IE 浏览器。建议使用 Chrome、Edge 等浏览器最新版。</p>
      </div>
    <![endif]-->
    <script>
      var initialDate = Date.now();
      var handle = setInterval(() => {
        var timeEl = document.querySelector('#initial-loading span:last-child');
        if (timeEl === null) {
          clearInterval(handle);
          return;
        }
        var diff = Date.now() - initialDate;
        if (diff > 3000) {
          document.querySelector('#initial-loading span:nth-child(2)').style.display = 'block';
        }
        timeEl.textContent = diff.toString() + 'ms';
        timeEl.style.opacity = (0.6 + 0.4 * Math.sin(diff / 200)).toString();
      }, 50);
    </script>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
